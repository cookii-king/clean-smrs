{% extends 'widgets/base.html' %}
{% block content %}
<div class="container mt-5">
    <h2 class="text-center mb-4">Create Observation</h2>
    {% if message %}
    <div class="alert alert-success">
        {{ message }}
    </div>
    {% elif error %}
    <div class="alert alert-danger">
        {{ error }}
    </div>
    {% endif %}
    <form action="{% url 'observation-create' %}" method="POST" class="needs-validation" novalidate>
        {% csrf_token %}
        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="date" class="form-label">Date</label>
                <input type="date" id="date" name="date" class="form-control" required>
                <div class="invalid-feedback">
                    Please provide a valid date.
                </div>
            </div>
            <div class="col-md-6 mb-3">
                <label for="time" class="form-label">Time</label>
                <input type="time" id="time" name="time" class="form-control" required>
                <div class="invalid-feedback">
                    Please provide a valid time.
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="time_zone_offset" class="form-label">Time Zone Offset</label>
                <input type="text" id="time_zone_offset" name="time_zone_offset" class="form-control" placeholder="UTC-05:00" required>
                <div class="invalid-feedback">
                    Please provide a valid time zone offset.
                </div>
            </div>
            <div class="col-md-6 mb-3">
                <label for="latitude" class="form-label">Latitude</label>
                <input type="number" step="any" id="latitude" name="latitude" class="form-control" required>
                <div class="invalid-feedback">
                    Please provide a valid latitude.
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="longitude" class="form-label">Longitude</label>
                <input type="number" step="any" id="longitude" name="longitude" class="form-control" required>
                <div class="invalid-feedback">
                    Please provide a valid longitude.
                </div>
            </div>
            <div class="col-md-6 mb-3">
                <label for="temperature_water" class="form-label">Water Temperature (°C)</label>
                <input type="number" step="any" id="temperature_water" name="temperature_water" class="form-control">
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="temperature_air" class="form-label">Air Temperature (°C)</label>
                <input type="number" step="any" id="temperature_air" name="temperature_air" class="form-control">
            </div>
            <div class="col-md-6 mb-3">
                <label for="humidity" class="form-label">Humidity (%)</label>
                <input type="number" step="any" id="humidity" name="humidity" class="form-control">
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="wind_speed" class="form-label">Wind Speed (m/s)</label>
                <input type="number" step="any" id="wind_speed" name="wind_speed" class="form-control">
            </div>
            <div class="col-md-6 mb-3">
                <label for="wind_direction" class="form-label">Wind Direction (°)</label>
                <input type="number" step="any" id="wind_direction" name="wind_direction" class="form-control">
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="precipitation" class="form-label">Precipitation (mm)</label>
                <input type="number" step="any" id="precipitation" name="precipitation" class="form-control">
            </div>
            <div class="col-md-6 mb-3">
                <label for="haze" class="form-label">Haze</label>
                <input type="number" step="any" id="haze" name="haze" class="form-control">
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="becquerel" class="form-label">Becquerel</label>
                <input type="number" step="any" id="becquerel" name="becquerel" class="form-control">
            </div>
            <div class="col-md-6 mb-3">
                <label for="notes" class="form-label">Notes</label>
                <textarea id="notes" name="notes" class="form-control" rows="3"></textarea>
            </div>
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
</div>
<script>
    // Bootstrap validation
    (function () {
        'use strict';
        window.addEventListener('load', function () {
            var forms = document.getElementsByClassName('needs-validation');
            Array.prototype.filter.call(forms, function (form) {
                form.addEventListener('submit', function (event) {
                    if (form.checkValidity() === false) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        }, false);
    })();
</script>
{% endblock %}